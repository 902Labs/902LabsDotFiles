# Setup UTF8
setw -q -g utf8 on

# set window split
#bind-key v split-window -h -c "#{pane_current_path}"
#bind-key s split-window -c "#{pane_current_path}"

bind-key -r -T prefix {  swap-pane -U
bind-key -r -T prefix }  swap-pane -D

set -g status-interval 1
set -g status-left '#(hostname || uname)'
set -g status-right '#[fg=green,bg=default,bright]#(~/.tmux/status-right.sh)'

# Start numbering at 1
set -g base-index 0
set-window-option -g pane-base-index 0

# Allows for faster key repetition
set -s escape-time 0

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize on

# Allows us to use C-a a <command> to send commands to a TMUX session inside
# another TMUX session
bind-key a send-prefix

# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# Vi copypaste mode
set-window-option -g mode-keys vi
#bind-key -t vi-copy 'v' begin-selection
#bind-key -t vi-copy 'y' copy-selection

# hjkl pane traversal
bind J resize-pane -D 8
bind K resize-pane -U 8
bind H resize-pane -L 8
bind L resize-pane -R 8

unbind l
bind l last-window

# reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# rm mouse mode fail
set -g mouse on

# don't rename windows automatically
set-option -g allow-rename off
set -g history-limit 100000

# copy to Mac OSX clipboard
set -g default-command 'reattach-to-user-namespace $SHELL --login'
# if -b 'command -v reattach-to-user-namespace > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | reattach-to-user-namespace pbcopy"'

# copy to X11 clipboard
if -b 'command -v xsel > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | xsel -i -b"'
if -b '! command -v xsel > /dev/null 2>&1 && command -v xclip > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | xclip -i -selection clipboard >/dev/null 2>&1"'

# copy to Windows clipboard
if -b 'command -v clip.exe > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | clip.exe"'
if -b '[ -c /dev/clipboard ]' 'bind y run -b "tmux save-buffer - > /dev/clipboard"'

bind b list-buffers  # list paste buffers
bind p paste-buffer  # paste from the top paste buffer
bind P choose-buffer # choose which buffer to paste from

# choose only sessions
bind-key -r -T prefix s choose-session

# choose window w/ all sessions
bind-key -r -T prefix W choose-window

# choose window inside current session
bind-key -r -T prefix w run-shell 'tmux choose-tree -Nwf"##{==:##{session_name},#{session_name}}"'

# Theme
source ~/.tmux/theme01.conf
